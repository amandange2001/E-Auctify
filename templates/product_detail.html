{% load static %}
{% include 'header.html' %}

<title>E-Auctify/product detail</title>
<br>
<center>
    <h2>----- Product Detail ------</h2>
</center>
<br> 
{% block content %}
  <div class="container mt-4">
    <div class="row">
      <div class="col-md-6">
        <img src="{{ product.image.url }}" alt="{{ product.product_name }}" class="img-fluid">
      </div>
      <div class="col-md-6">
        <h2><b>{{ product.product_name }}</b></h2>
        <br>
        <p>{{ product.desc }}</p>
        <p><b>Base Price:</b> {{ product.base_price }}</p>
        <!-- Additional Product Information -->
        <div class="card-body">
          <p class="card-text"><b>Seller:</b> {{ product.userid }}</p>
        </div>
        <!-- Auction Status -->
        <div class="card-body">
          <p class="card-text"><b>Status:</b> {{ product.status }}</p>
        </div>
        
        <br>
        <!-- Bid History -->
        {% if product.status == 'active' %}
        <div class="card-body">
          <h5 class="card-title"><b>Bid History</b></h5>
          <ul>
            {% for bid in product.bid_history %}
              <li>{{ bid.user }} placed a bid of {{ bid.amount }}</li>
            {% endfor %}
          </ul>
        </div>
        <!-- Auction Countdown -->
        <div class="card-body">
          <p class="card-text"><b>Time Left:</b> {{ product.time_left }}</p>
        </div>
        <!-- Current Bid -->
        <div class="card-body">
          <p class="card-text"><b>Current Bid:</b> {{ product.current_bid }}</p>
        </div>
        
        
        <!-- Bidding Controls -->
        <div class="card-body">
          <form method="post" action="">
            <!-- Add bidding controls here -->
            {% csrf_token %}
            <label for="bid_amount"><b>Your Bid:</b></label>
            <input type="number" id="bid_amount" name="bid_amount" min="{{ product.current_bid }}" required>
            <button type="submit" class="btn btn-primary">Place Bid</button>
          </form>
        </div>
        {% endif %}
        <br>
        <!-- Auction Terms and Conditions -->
        <div class="auction-terms">
          <h5><b>Auction Terms and Conditions</b></h5>
          <!-- Add terms and conditions content here -->
        </div>
        <!-- Winner Announcement (display only if auction has ended) -->
        {% if product.auction_status == 'ended' %}
          <div class="card-body">
            <p class="card-text">Winner: {{ product.winner }}</p>
            <p class="card-text">Winning Bid: {{ product.winning_bid }}</p>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
{% endblock %}
<br>
{% include 'footer.html' %}
